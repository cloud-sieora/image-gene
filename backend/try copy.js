const input = [
    {
        "Active": 2,
        "__v": 1,
        "_id": "ckw8vhucg000w1wid0rf6f16t",
        "block": "1",
        "building": "1",
        "cancel_reason": "WASTAGE",
        "client_id": "1",
        "date": "2021-11-21",
        "delivery_packing_charges": 0,
        "delivery_status": "34",
        "driver": "4",
        "flat_number": "1",
        "item_wise_breakup": [
            {
                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8b",
                "comments": "N/A",
                "food_description": "PLAIN DOSA WITH SAMBAR AND CHUTNY",
                "food_name": "DOSA",
                "food_option_name": "MASALA DOSA",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 740,
                "qty": 1,
                "sub_menu_category": "BREAKFAST"
            },
            {
                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8c",
                "comments": "N/A",
                "food_description": "PLAIN DOSA WITH SAMBAR AND CHUTNY",
                "food_name": "DOSA",
                "food_option_name": "PLAIN DOSA",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 50,
                "qty": 1,
                "sub_menu_category": "BREAKFAST"
            },
            {
                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8d",
                "comments": "N/A",
                "food_description": "PLAIN DOSA WITH SAMBAR AND CHUTNY",
                "food_name": "DOSA",
                "food_option_name": "ONION DOSA",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 700,
                "qty": 1,
                "sub_menu_category": "GRILL"
            },
            {
                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8d",
                "comments": "N/A",
                "food_description": "PLAIN DOSA WITH SAMBAR AND CHUTNY",
                "food_name": "DOSA",
                "food_option_name": "ONION DOSA",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 70,
                "qty": 1,
                "sub_menu_category": "GRILL"
            },
            {

                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8e",
                "comments": "N/A",
                "food_description": "CUP OF PONGAL WITH SAMBAR",
                "food_name": "PONGAL",
                "food_option_name": "REGULAR",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 60,
                "qty": 1,
                "sub_menu_category": "BREAKFAST"
            },
            {
                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8f",
                "comments": "N/A",
                "food_description": "SET OF 2 POORI WITH POTATO CURRY",
                "food_name": "POORI",
                "food_option_name": "REGULAR",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 50,
                "qty": 1,
                "sub_menu_category": "BREAKFAST"
            },
            {
                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8f",
                "comments": "N/A",
                "food_description": "SET OF 2 POORI WITH POTATO CURRY",
                "food_name": "POORI",
                "food_option_name": "REGULAR",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 50,
                "qty": 1,
                "sub_menu_category": "GRILL"
            }
        ],

        "lat": "26.0667",
        "lon": "50.5577",
        "main_menu_category": "DELIVERY",
        "mobile_number": "9962037023",
        "operator_id": "1",
        "operator_type": "ADMIN",
        "order_id": 5,
        "order_type": "DELIVERY",
        "payment_method": [
            {
                "_id": "6199ea528f42038bf15b4f90",
                "amount": 315,
                "name": "CASH"
            }
        ],
        "road": "1",
        "status": "UNSETTLED",
        "sub_total": 300,
        "table_name": "NONE",
        "tax_name_percentage": [
            {
                "_id": "6199ea528f42038bf15b4f8a",
                "tax_name": "GST",
                "tax_percentage": 5
            }
        ],
        "time": "12:12",
        "total": 315,
        "total_tax_amount": 15,
        "wastage_flag": 0
    },


    {
        "Active": 2,
        "__v": 1,
        "_id": "ckw8vhucg000w1wid0rf6f165",
        "block": "1",
        "building": "1",
        "cancel_reason": "WASTAGE",
        "client_id": "1",
        "date": "2021-11-21",
        "delivery_packing_charges": 0,
        "delivery_status": "34",
        "driver": "4",
        "flat_number": "1",
        "item_wise_breakup": [
            {
                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8b",
                "comments": "N/A",
                "food_description": "PLAIN DOSA WITH SAMBAR AND CHUTNY",
                "food_name": "DOSA",
                "food_option_name": "MASALA DOSA",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 70,
                "qty": 1,
                "sub_menu_category": "BREAKFAST"
            },
            {
                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8c",
                "comments": "N/A",
                "food_description": "PLAIN DOSA WITH SAMBAR AND CHUTNY",
                "food_name": "DOSA",
                "food_option_name": "PLAIN DOSA",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 50,
                "qty": 1,
                "sub_menu_category": "BREAKFAST"
            },
            {
                "Active": 1,
                "_id": "6199ea528f42038bf15b4f8c",
                "comments": "N/A",
                "food_description": "PLAIN DOSA WITH SAMBAR AND CHUTNY",
                "food_name": "DOSA",
                "food_option_name": "PLAIN DOSA",
                "food_type": 0,
                "in_time": "12:12",
                "out_time": "12:12",
                "price_per_food": 50,
                "qty": 1,
                "sub_menu_category": "BREAKFAST"
            }


        ],
        "lat": "26.0667",
        "lon": "50.5577",
        "main_menu_category": "DELIVERY",
        "mobile_number": "9962037023",
        "operator_id": "1",
        "operator_type": "ADMIN",
        "order_id": 5,
        "order_type": "DELIVERY",
        "payment_method": [
            {
                "_id": "6199ea528f42038bf15b4f90",
                "amount": 315,
                "name": "CASH"
            }
        ],
        "road": "1",
        "status": "UNSETTLED",
        "sub_total": 300,
        "table_name": "NONE",
        "tax_name_percentage": [
            {
                "_id": "6199ea528f42038bf15b4f8a",
                "tax_name": "GST",
                "tax_percentage": 5
            }
        ],
        "time": "12:12",
        "total": 315,
        "total_tax_amount": 15,
        "wastage_flag": 0
    }
]



let output = [], temp = []
let unique_value_temp = []

for (i = 1; i <= 5; i++) {
    unique_value_temp.push(i)
}

// console.log(unique_value_temp)

for (i = 0; i <= input.length - 1; i++) {

    const uniqueValue = new Set()
    for (const object of input[i].item_wise_breakup) {
        uniqueValue.add(object.Active)
    }
    let unique_value = Array.from(new Set(uniqueValue))

    // const uniqueSub = new Set()
    // for (const object of input[i].item_wise_breakup) {
    //     uniqueSub.add(object.sub_menu_category)
    // }
    // let unique_sub = Array.from(new Set(uniqueSub))

    // console.log(unique_sub)
    // console.log(unique_value)
    let five_flag = unique_value.includes(5)
    let six_flag = unique_value.includes(6)
    console.log(five_flag,six_flag)
    if (five_flag == false && six_flag == false) {
        // console.log("dchbhdbcfhdbh",input[i].item_wise_breakup)
        

        for (j = 0; j <= unique_value.length - 1; j++) {
            // console.log(j+"sdjv ")
            input[i].item_wise_breakup.map((a1) => {
                if (a1.Active == unique_value[j] && unique_value[j] != 7 && unique_value[j] != 4) {
                    temp.push(a1)

                }
            })
            // console.log(temp)
            if (temp.length > 0) {
                let temp3 = {
                  "_id": input[i]._id,
                  "order_id": input[i].order_id,
                  "operator_id": input[i].operator_id,
                  "main_menu_category": input[i].main_menu_category,
                  "order_type": input[i].order_type,
                  "table_name": input[i].table_name,
                  "status": input[i].status,
                  "time": input[i].time,
                  "Active": input[i].Active,
                  "item_wise_breakup": temp
                }
                output.push(temp3)
            }
            temp = []
            five_flag = false

        }
    }
    else {
        let five_array = []
        input[i].item_wise_breakup.map((a1) => {
            if (a1.Active == 5) {
                five_array.push(a1)

            }
        })
        const uniqueValue1 = new Set()
        for (const object of five_array) {
            uniqueValue1.add(object.sub_menu_category)
        }
        let unique_value1 = Array.from(new Set(uniqueValue1))
        // console.log(unique_value1 ,"jubj")
        // let unique_value_final=[]
        for (m = 0; m <= unique_value1.length - 1; m++) {
            input[i].item_wise_breakup.map((a1) => {
                if (a1.Active == 2 || a1.Active == 3 && a1.sub_menu_category == unique_value1[m]) {

                    a1.Active = 1
                }
            })

            }   


        // console.log(input[i].item_wise_breakup)


        // console.log(unique_value_temp)
        for (j = 0; j <= unique_value_temp.length - 1; j++) {
            // console.log(unique_value_temp[j])
            input[i].item_wise_breakup.map((a1) => {
                // console.log(a1.Active )
                if (a1.Active == unique_value_temp[j] && unique_value_temp[j] != 7 && unique_value_temp[j] != 4 && unique_value_temp[j] != 5) {
                    temp.push(a1)
                    // console.log("test")


                }
                else if (a1.Active == 5 && unique_value_temp[j] == 1) {
                    temp.push(a1)
                }
                else if (a1.Active == 6 && unique_value_temp[j] == 2) {
                    temp.push(a1)
                }
                else if (a1.Active == 6 && unique_value_temp[j] == 3) {
                    temp.push(a1)
                }
            })
            let six_avoid = 0,six_avoid1 = 0
            if (temp.length > 0) {
                temp.map((a1)=>
                {
                    if(a1.Active == 6)
                    {
                        six_avoid=1
                    }
                    else
                    {
                        six_avoid1=1 
                    }
                })
                if(six_avoid==1 && six_avoid1 ==0)
                    {
               
                    }
            else
            {
                let temp3 = {
                    "_id": input[i]._id,
                    "order_id": input[i].order_id,
                    "operator_id": input[i].operator_id,
                    "main_menu_category": input[i].main_menu_category,
                    "order_type": input[i].order_type,
                    "table_name": input[i].table_name,
                    "status": input[i].status,
                    "time": input[i].time,
                    "Active": input[i].Active,
                    "item_wise_breakup": temp
                  }
                output.push(temp3)


                temp = []
                five_flag = false
                six_avoid = 0
                six_avoid1 = 0
            }

            }
            temp = []
            five_flag = false
            six_avoid = 0
            six_avoid1 = 0

        }
    }


    unique_value_temp

}
console.log(output)